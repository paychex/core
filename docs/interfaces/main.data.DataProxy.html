<!DOCTYPE html><html class="default"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>DataProxy | @paychex/core</title><meta name="description" content="Documentation for @paychex/core"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="../assets/style.css"/><link rel="stylesheet" href="../assets/highlight.css"/><script async src="../assets/search.js" id="search-script"></script></head><body><script>document.body.classList.add(localStorage.getItem("tsd-theme") || "os")</script><header><div class="tsd-page-toolbar"><div class="container"><div class="table-wrap"><div class="table-cell" id="tsd-search" data-base=".."><div class="field"><label for="tsd-search-field" class="tsd-widget search no-caption">Search</label><input type="text" id="tsd-search-field"/></div><ul class="results"><li class="state loading">Preparing search index...</li><li class="state failure">The search index is not available</li></ul><a href="../index.html" class="title">@paychex/core</a></div><div class="table-cell" id="tsd-widgets"><div id="tsd-filter"><a href="#" class="tsd-widget options no-caption" data-toggle="options">Options</a><div class="tsd-filter-group"><div class="tsd-select" id="tsd-filter-visibility"><span class="tsd-select-label">All</span><ul class="tsd-select-list"><li data-value="public">Public</li><li data-value="protected">Public/Protected</li><li data-value="private" class="selected">All</li></ul></div> <input type="checkbox" id="tsd-filter-inherited" checked/><label class="tsd-widget" for="tsd-filter-inherited">Inherited</label><input type="checkbox" id="tsd-filter-externals" checked/><label class="tsd-widget" for="tsd-filter-externals">Externals</label></div></div><a href="#" class="tsd-widget menu no-caption" data-toggle="menu">Menu</a></div></div></div></div><div class="tsd-page-title"><div class="container"><ul class="tsd-breadcrumb"><li><a href="../modules.html">@paychex/core</a></li><li><a href="../modules/main.html">main</a></li><li><a href="../modules/main.data.html">data</a></li><li><a href="main.data.DataProxy.html">DataProxy</a></li></ul><h1>Interface DataProxy</h1></div></div></header><div class="container container-main"><div class="row"><div class="col-8 col-content"><section class="tsd-panel tsd-comment"><div class="tsd-comment tsd-typography"><div class="lead">
<p>The Proxy provides an intercept layer based on build- and run-time configurations to enable
easier local development, impersonation, dynamic endpoints, static data redirects, and user-
and environment-specific versioning.</p>
</div><div><pre><code class="language-js"><span class="hl-2">const</span><span class="hl-0"> </span><span class="hl-5">proxy</span><span class="hl-0"> = </span><span class="hl-3">data</span><span class="hl-0">.</span><span class="hl-6">createProxy</span><span class="hl-0">();</span>
</code></pre>
</div></div></section><section class="tsd-panel tsd-hierarchy"><h3>Hierarchy</h3><ul class="tsd-hierarchy"><li><span class="target">DataProxy</span></li></ul></section><section class="tsd-panel-group tsd-index-group"><h2>Index</h2><section class="tsd-panel tsd-index-panel"><div class="tsd-index-content"><section class="tsd-index-section "><h3>Methods</h3><ul class="tsd-index-list"><li class="tsd-kind-method tsd-parent-kind-interface"><a href="main.data.DataProxy.html#apply" class="tsd-kind-icon">apply</a></li><li class="tsd-kind-method tsd-parent-kind-interface"><a href="main.data.DataProxy.html#url" class="tsd-kind-icon">url</a></li><li class="tsd-kind-method tsd-parent-kind-interface"><a href="main.data.DataProxy.html#use" class="tsd-kind-icon">use</a></li></ul></section></div></section></section><section class="tsd-panel-group tsd-member-group "><h2>Methods</h2><section class="tsd-panel tsd-member tsd-kind-method tsd-parent-kind-interface"><a id="apply" class="tsd-anchor"></a><h3 class="tsd-anchor-link">apply<a href="#apply" aria-label="Permalink" class="tsd-anchor-icon"><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M10 14a3.5 3.5 0 0 0 5 0l4 -4a3.5 3.5 0 0 0 -5 -5l-.5 .5"></path><path d="M14 10a3.5 3.5 0 0 0 -5 0l-4 4a3.5 3.5 0 0 0 5 5l.5 -.5"></path></svg></a></h3><ul class="tsd-signatures tsd-kind-method tsd-parent-kind-interface"><li class="tsd-signature tsd-kind-icon">apply<span class="tsd-signature-symbol">(</span>request<span class="tsd-signature-symbol">: </span><a href="main.data.Request.html" class="tsd-signature-type" data-tsd-kind="Interface">Request</a><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><a href="main.data.Request.html" class="tsd-signature-type" data-tsd-kind="Interface">Request</a></li></ul><ul class="tsd-descriptions"><li class="tsd-description"><aside class="tsd-sources"><ul><li>Defined in data/index.ts:733</li></ul></aside><div class="tsd-comment tsd-typography"><div class="lead">
<p>Modifies the input Request object according to any matching Proxy rules.
Rules are applied in the order they were added to the Proxy, so later rules will
always override earlier rules.</p>
</div><div><p><strong>NOTE:</strong> You will not typically call this method directly. Instead, the
DataLayer.createRequest method will invoke this function on your behalf. See
that method for details.</p>
</div><dl class="tsd-comment-tags"><dt>see</dt><dd><p><a href="main.data.DataLayer.html#createRequest">createRequest</a> â€” invokes the apply
method for you</p>
</dd><dt>example</dt><dd><pre><code class="language-js"><span class="hl-1">import</span><span class="hl-0"> { </span><span class="hl-3">proxy</span><span class="hl-0">, </span><span class="hl-3">createRequest</span><span class="hl-0">, </span><span class="hl-3">fetch</span><span class="hl-0"> } </span><span class="hl-1">from</span><span class="hl-0"> </span><span class="hl-4">&#39;~/path/to/data&#39;</span><span class="hl-0">;</span><br/><span class="hl-1">import</span><span class="hl-0"> </span><span class="hl-3">switches</span><span class="hl-0"> </span><span class="hl-1">from</span><span class="hl-0"> </span><span class="hl-4">&#39;../config/features.mjson&#39;</span><span class="hl-0">;</span><br/><br/><span class="hl-1">if</span><span class="hl-0"> (</span><span class="hl-3">switches</span><span class="hl-0">.</span><span class="hl-3">useV2endpoint</span><span class="hl-0">) {</span><br/><span class="hl-0">  </span><span class="hl-7">// switch from Remote to REST endpoint</span><br/><span class="hl-0">  </span><span class="hl-3">proxy</span><span class="hl-0">.</span><span class="hl-6">use</span><span class="hl-0">({</span><br/><span class="hl-0">    </span><span class="hl-3">path:</span><span class="hl-0"> </span><span class="hl-4">&#39;/v2/endpoint&#39;</span><span class="hl-0">,</span><br/><span class="hl-0">    </span><span class="hl-3">match:</span><span class="hl-0"> {</span><br/><span class="hl-0">      </span><span class="hl-3">base:</span><span class="hl-0"> </span><span class="hl-4">&#39;my-project&#39;</span><span class="hl-0">,</span><br/><span class="hl-0">      </span><span class="hl-3">path:</span><span class="hl-0"> </span><span class="hl-4">&#39;/endpoint&#39;</span><span class="hl-0">,</span><br/><span class="hl-0">    }</span><br/><span class="hl-0">  });</span><br/><span class="hl-0">}</span><br/><br/><span class="hl-1">export</span><span class="hl-0"> </span><span class="hl-2">async</span><span class="hl-0"> </span><span class="hl-2">function</span><span class="hl-0"> </span><span class="hl-6">getEndpointData</span><span class="hl-0">() {</span><br/><span class="hl-0">  </span><span class="hl-7">// createRequest modifies the Request</span><br/><span class="hl-0">  </span><span class="hl-7">// object generated by the DDO using</span><br/><span class="hl-0">  </span><span class="hl-7">// Proxy rules, including the one above</span><br/><span class="hl-0">  </span><span class="hl-2">const</span><span class="hl-0"> </span><span class="hl-5">request</span><span class="hl-0"> = </span><span class="hl-6">createRequest</span><span class="hl-0">({</span><br/><span class="hl-0">    </span><span class="hl-3">base:</span><span class="hl-0"> </span><span class="hl-4">&#39;my-project&#39;</span><span class="hl-0">,</span><br/><span class="hl-0">    </span><span class="hl-3">path:</span><span class="hl-0"> </span><span class="hl-4">&#39;/endpoint&#39;</span><span class="hl-0">,</span><br/><span class="hl-0">  });</span><br/><span class="hl-0">  </span><span class="hl-2">const</span><span class="hl-0"> </span><span class="hl-5">response</span><span class="hl-0"> = </span><span class="hl-1">await</span><span class="hl-0"> </span><span class="hl-6">fetch</span><span class="hl-0">(</span><span class="hl-3">request</span><span class="hl-0">)</span><br/><span class="hl-0">    .</span><span class="hl-6">catch</span><span class="hl-0">(</span><span class="hl-3">errors</span><span class="hl-0">.</span><span class="hl-6">rethrow</span><span class="hl-0">(</span><span class="hl-3">errors</span><span class="hl-0">.</span><span class="hl-6">fatal</span><span class="hl-0">()));</span><br/><span class="hl-0">  </span><span class="hl-1">return</span><span class="hl-0"> </span><span class="hl-3">response</span><span class="hl-0">.</span><span class="hl-3">data</span><span class="hl-0">;</span><br/><span class="hl-0">}</span>
</code></pre>
</dd></dl></div><h4 class="tsd-parameters-title">Parameters</h4><ul class="tsd-parameters"><li><h5>request: <a href="main.data.Request.html" class="tsd-signature-type" data-tsd-kind="Interface">Request</a></h5><div class="tsd-comment tsd-typography"><div class="lead">
<p>The request object whose key/value pairs will be used
to determine which proxy rules should be used to determine the version.</p>
</div></div></li></ul><h4 class="tsd-returns-title">Returns <a href="main.data.Request.html" class="tsd-signature-type" data-tsd-kind="Interface">Request</a></h4><div><p>The input Request object, with properties modified according
to the matching Proxy rules.</p>
</div></li></ul></section><section class="tsd-panel tsd-member tsd-kind-method tsd-parent-kind-interface"><a id="url" class="tsd-anchor"></a><h3 class="tsd-anchor-link">url<a href="#url" aria-label="Permalink" class="tsd-anchor-icon"><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M10 14a3.5 3.5 0 0 0 5 0l4 -4a3.5 3.5 0 0 0 -5 -5l-.5 .5"></path><path d="M14 10a3.5 3.5 0 0 0 -5 0l-4 4a3.5 3.5 0 0 0 5 5l.5 -.5"></path></svg></a></h3><ul class="tsd-signatures tsd-kind-method tsd-parent-kind-interface"><li class="tsd-signature tsd-kind-icon">url<span class="tsd-signature-symbol">(</span><span class="tsd-signature-symbol">...</span>args<span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">any</span><span class="tsd-signature-symbol">[]</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">string</span></li></ul><ul class="tsd-descriptions"><li class="tsd-description"><aside class="tsd-sources"><ul><li>Defined in data/index.ts:663</li></ul></aside><div class="tsd-comment tsd-typography"><div class="lead">
<p>Uses the current proxy rules to construct a URL based on the given arguments.</p>
</div><dl class="tsd-comment-tags"><dt>example</dt><dd><pre><code class="language-js"><span class="hl-2">const</span><span class="hl-0"> </span><span class="hl-5">url</span><span class="hl-0"> = </span><span class="hl-3">proxy</span><span class="hl-0">.</span><span class="hl-6">url</span><span class="hl-0">(</span><span class="hl-4">&#39;cdn&#39;</span><span class="hl-0">, </span><span class="hl-4">&#39;images&#39;</span><span class="hl-0">, </span><span class="hl-4">&#39;logo.svg&#39;</span><span class="hl-0">);</span>
</code></pre>
</dd><dt>example</dt><dd><pre><code class="language-js"><span class="hl-2">const</span><span class="hl-0"> </span><span class="hl-5">url</span><span class="hl-0"> = </span><span class="hl-3">proxy</span><span class="hl-0">.</span><span class="hl-6">url</span><span class="hl-0">({</span><br/><span class="hl-0">  </span><span class="hl-3">base:</span><span class="hl-0"> </span><span class="hl-4">&#39;cdn&#39;</span><span class="hl-0">,</span><br/><span class="hl-0">  </span><span class="hl-3">protocol:</span><span class="hl-0"> </span><span class="hl-4">&#39;https&#39;</span><span class="hl-0">,</span><br/><span class="hl-0">  </span><span class="hl-3">path:</span><span class="hl-0"> </span><span class="hl-4">&#39;/some/path&#39;</span><br/><span class="hl-0">});</span>
</code></pre>
</dd><dt>example</dt><dd><pre><code class="language-js"><span class="hl-1">import</span><span class="hl-0"> { </span><span class="hl-3">proxy</span><span class="hl-0"> } </span><span class="hl-1">from</span><span class="hl-0"> </span><span class="hl-4">&#39;~/path/to/data&#39;</span><span class="hl-0">;</span><br/><br/><span class="hl-3">proxy</span><span class="hl-0">.</span><span class="hl-6">use</span><span class="hl-0">({</span><br/><span class="hl-0">  </span><span class="hl-3">port:</span><span class="hl-0"> </span><span class="hl-8">8118</span><span class="hl-0">,</span><br/><span class="hl-0">  </span><span class="hl-3">protocol:</span><span class="hl-0"> </span><span class="hl-4">&#39;https&#39;</span><span class="hl-0">,</span><br/><span class="hl-0">  </span><span class="hl-3">host:</span><span class="hl-0"> </span><span class="hl-4">&#39;images.myserver.com&#39;</span><span class="hl-0">,</span><br/><span class="hl-0">  </span><span class="hl-3">match:</span><span class="hl-0"> {</span><br/><span class="hl-0">    </span><span class="hl-3">base:</span><span class="hl-0"> </span><span class="hl-4">&#39;images&#39;</span><br/><span class="hl-0">  }</span><br/><span class="hl-0">});</span>
</code></pre>
<pre><code class="language-html"><span class="hl-11">&lt;</span><span class="hl-12">img</span><span class="hl-0"> </span><span class="hl-13">src</span><span class="hl-0">=</span><span class="hl-14">&quot;{{ getImageURL(&#39;avatars&#39;, &#39;e13d429a&#39;) }}&quot;</span><span class="hl-0"> </span><span class="hl-13">alt</span><span class="hl-0">=</span><span class="hl-14">&quot;&quot;</span><span class="hl-0"> </span><span class="hl-11">/&gt;</span><br/><span class="hl-7">&lt;!-- https://images.myserver.com:8118/avatars/e13d429a --&gt;</span>
</code></pre>
<pre><code class="language-js"><span class="hl-1">export</span><span class="hl-0"> </span><span class="hl-2">function</span><span class="hl-0"> </span><span class="hl-6">getImageURL</span><span class="hl-0">(</span><span class="hl-3">bucket</span><span class="hl-0">, </span><span class="hl-3">id</span><span class="hl-0">) {</span><br/><span class="hl-0">  </span><span class="hl-1">return</span><span class="hl-0"> </span><span class="hl-3">proxy</span><span class="hl-0">.</span><span class="hl-6">url</span><span class="hl-0">(</span><span class="hl-4">&#39;images&#39;</span><span class="hl-0">, </span><span class="hl-3">bucket</span><span class="hl-0">, </span><span class="hl-3">id</span><span class="hl-0">);</span><br/><span class="hl-0">}</span>
</code></pre>
</dd></dl></div><h4 class="tsd-parameters-title">Parameters</h4><ul class="tsd-parameters"><li><h5><span class="tsd-flag ts-flagRest">Rest</span> <span class="tsd-signature-symbol">...</span>args: <span class="tsd-signature-type">any</span><span class="tsd-signature-symbol">[]</span></h5></li></ul><h4 class="tsd-returns-title">Returns <span class="tsd-signature-type">string</span></h4><div><p>A URL with the appropriate protocol, host, port, and paths
given the currently configured proxy rules.</p>
</div></li></ul></section><section class="tsd-panel tsd-member tsd-kind-method tsd-parent-kind-interface"><a id="use" class="tsd-anchor"></a><h3 class="tsd-anchor-link">use<a href="#use" aria-label="Permalink" class="tsd-anchor-icon"><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M10 14a3.5 3.5 0 0 0 5 0l4 -4a3.5 3.5 0 0 0 -5 -5l-.5 .5"></path><path d="M14 10a3.5 3.5 0 0 0 -5 0l-4 4a3.5 3.5 0 0 0 5 5l.5 -.5"></path></svg></a></h3><ul class="tsd-signatures tsd-kind-method tsd-parent-kind-interface"><li class="tsd-signature tsd-kind-icon">use<span class="tsd-signature-symbol">(</span><span class="tsd-signature-symbol">...</span>rules<span class="tsd-signature-symbol">: </span><a href="main.data.ProxyRule.html" class="tsd-signature-type" data-tsd-kind="Interface">ProxyRule</a><span class="tsd-signature-symbol">[]</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">void</span></li></ul><ul class="tsd-descriptions"><li class="tsd-description"><aside class="tsd-sources"><ul><li>Defined in data/index.ts:686</li></ul></aside><div class="tsd-comment tsd-typography"><div class="lead">
<p>Add <a href="main.data.ProxyRule.html">rules</a> to the proxy instance. The order rules are added determines
the order they are applied.</p>
</div><dl class="tsd-comment-tags"><dt>example</dt><dd><pre><code class="language-js"><span class="hl-1">import</span><span class="hl-0"> { </span><span class="hl-3">proxy</span><span class="hl-0"> } </span><span class="hl-1">from</span><span class="hl-0"> </span><span class="hl-4">&#39;~/path/to/data&#39;</span><span class="hl-0">;</span><br/><br/><span class="hl-7">// any &lt;a href=&quot;main.data.Request.html&quot;&gt;Requests&lt;/a&gt; with base == &#39;files&#39;</span><br/><span class="hl-7">// will be routed to https://files.myserver.com:8118</span><br/><span class="hl-3">proxy</span><span class="hl-0">.</span><span class="hl-6">use</span><span class="hl-0">({</span><br/><span class="hl-0">  </span><span class="hl-3">port:</span><span class="hl-0"> </span><span class="hl-8">8118</span><span class="hl-0">,</span><br/><span class="hl-0">  </span><span class="hl-3">protocol:</span><span class="hl-0"> </span><span class="hl-4">&#39;https&#39;</span><span class="hl-0">,</span><br/><span class="hl-0">  </span><span class="hl-3">host:</span><span class="hl-0"> </span><span class="hl-4">&#39;files.myserver.com&#39;</span><span class="hl-0">,</span><br/><span class="hl-0">  </span><span class="hl-3">match:</span><span class="hl-0"> {</span><br/><span class="hl-0">    </span><span class="hl-3">base:</span><span class="hl-0"> </span><span class="hl-4">&#39;files&#39;</span><br/><span class="hl-0">  }</span><br/><span class="hl-0">});</span>
</code></pre>
</dd></dl></div><h4 class="tsd-parameters-title">Parameters</h4><ul class="tsd-parameters"><li><h5><span class="tsd-flag ts-flagRest">Rest</span> <span class="tsd-signature-symbol">...</span>rules: <a href="main.data.ProxyRule.html" class="tsd-signature-type" data-tsd-kind="Interface">ProxyRule</a><span class="tsd-signature-symbol">[]</span></h5><div class="tsd-comment tsd-typography"><div class="lead">
<p>The rules to use to configure this proxy instance.</p>
</div></div></li></ul><h4 class="tsd-returns-title">Returns <span class="tsd-signature-type">void</span></h4></li></ul></section></section></div><div class="col-4 col-menu menu-sticky-wrap menu-highlight"><nav class="tsd-navigation primary"><ul><li class=""><a href="../modules.html">Modules</a></li><li class="current tsd-kind-module"><a href="../modules/main.html">main</a><ul><li class="current tsd-kind-namespace tsd-parent-kind-module"><a href="../modules/main.data.html">data</a><ul><li class=" tsd-kind-namespace tsd-parent-kind-namespace"><a href="../modules/main.data.utils.html">utils</a></li></ul></li><li class=" tsd-kind-namespace tsd-parent-kind-module"><a href="../modules/main.errors.html">errors</a></li><li class=" tsd-kind-namespace tsd-parent-kind-module"><a href="../modules/main.events.html">events</a></li><li class=" tsd-kind-namespace tsd-parent-kind-module"><a href="../modules/main.formatters.html">formatters</a></li><li class=" tsd-kind-namespace tsd-parent-kind-module"><a href="../modules/main.functions.html">functions</a></li><li class=" tsd-kind-namespace tsd-parent-kind-module"><a href="../modules/main.models.html">models</a></li><li class=" tsd-kind-namespace tsd-parent-kind-module"><a href="../modules/main.process.html">process</a></li><li class=" tsd-kind-namespace tsd-parent-kind-module"><a href="../modules/main.signals.html">signals</a></li><li class=" tsd-kind-namespace tsd-parent-kind-module"><a href="../modules/main.stores.html">stores</a></li><li class=" tsd-kind-namespace tsd-parent-kind-module"><a href="../modules/main.trackers.html">trackers</a></li><li class=" tsd-kind-namespace tsd-parent-kind-module"><a href="../modules/main.validators.html">validators</a></li></ul></li><li class=" tsd-kind-module"><a href="../modules/test.html">test</a></li></ul></nav><nav class="tsd-navigation secondary menu-sticky"><ul><li class="current tsd-kind-interface tsd-parent-kind-namespace"><a href="main.data.DataProxy.html" class="tsd-kind-icon">Data<wbr/>Proxy</a><ul><li class="tsd-kind-method tsd-parent-kind-interface"><a href="main.data.DataProxy.html#apply" class="tsd-kind-icon">apply</a></li><li class="tsd-kind-method tsd-parent-kind-interface"><a href="main.data.DataProxy.html#url" class="tsd-kind-icon">url</a></li><li class="tsd-kind-method tsd-parent-kind-interface"><a href="main.data.DataProxy.html#use" class="tsd-kind-icon">use</a></li></ul></li></ul></nav></div></div></div><footer class=""><div class="container"><h2>Legend</h2><div class="tsd-legend-group"><ul class="tsd-legend"><li class="tsd-kind-namespace"><span class="tsd-kind-icon">Namespace</span></li><li class="tsd-kind-function"><span class="tsd-kind-icon">Function</span></li></ul><ul class="tsd-legend"><li class="tsd-kind-interface"><span class="tsd-kind-icon">Interface</span></li><li class="tsd-kind-method tsd-parent-kind-interface"><span class="tsd-kind-icon">Method</span></li></ul></div><h2>Settings</h2><p>Theme <select id="theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></p></div></footer><div class="overlay"></div><script src="../assets/main.js"></script></body></html>