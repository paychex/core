<!DOCTYPE html><html class="default"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>DataLayer | @paychex/core</title><meta name="description" content="Documentation for @paychex/core"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="../assets/style.css"/><link rel="stylesheet" href="../assets/highlight.css"/><script async src="../assets/search.js" id="search-script"></script></head><body><script>document.body.classList.add(localStorage.getItem("tsd-theme") || "os")</script><header><div class="tsd-page-toolbar"><div class="container"><div class="table-wrap"><div class="table-cell" id="tsd-search" data-base=".."><div class="field"><label for="tsd-search-field" class="tsd-widget search no-caption">Search</label><input type="text" id="tsd-search-field"/></div><ul class="results"><li class="state loading">Preparing search index...</li><li class="state failure">The search index is not available</li></ul><a href="../index.html" class="title">@paychex/core</a></div><div class="table-cell" id="tsd-widgets"><div id="tsd-filter"><a href="#" class="tsd-widget options no-caption" data-toggle="options">Options</a><div class="tsd-filter-group"><div class="tsd-select" id="tsd-filter-visibility"><span class="tsd-select-label">All</span><ul class="tsd-select-list"><li data-value="public">Public</li><li data-value="protected">Public/Protected</li><li data-value="private" class="selected">All</li></ul></div> <input type="checkbox" id="tsd-filter-inherited" checked/><label class="tsd-widget" for="tsd-filter-inherited">Inherited</label><input type="checkbox" id="tsd-filter-externals" checked/><label class="tsd-widget" for="tsd-filter-externals">Externals</label></div></div><a href="#" class="tsd-widget menu no-caption" data-toggle="menu">Menu</a></div></div></div></div><div class="tsd-page-title"><div class="container"><ul class="tsd-breadcrumb"><li><a href="../modules.html">@paychex/core</a></li><li><a href="../modules/main.html">main</a></li><li><a href="../modules/main.data.html">data</a></li><li><a href="main.data.DataLayer.html">DataLayer</a></li></ul><h1>Interface DataLayer</h1></div></div></header><div class="container container-main"><div class="row"><div class="col-8 col-content"><section class="tsd-panel tsd-comment"><div class="tsd-comment tsd-typography"><div class="lead">
<p>Contains the minimum functionality necessary to convert a
<a href="main.data.DataDefinition.html">DataDefinition</a> object into a <a href="main.data.Request.html">Request</a> and to
execute that Request against an <a href="main.data.Adapter.html">Adapter</a>, returning
a <a href="main.data.Response.html">Response</a> with the requested data.</p>
</div></div></section><section class="tsd-panel tsd-hierarchy"><h3>Hierarchy</h3><ul class="tsd-hierarchy"><li><span class="target">DataLayer</span></li></ul></section><section class="tsd-panel-group tsd-index-group"><h2>Index</h2><section class="tsd-panel tsd-index-panel"><div class="tsd-index-content"><section class="tsd-index-section "><h3>Methods</h3><ul class="tsd-index-list"><li class="tsd-kind-method tsd-parent-kind-interface"><a href="main.data.DataLayer.html#createRequest" class="tsd-kind-icon">create<wbr/>Request</a></li><li class="tsd-kind-method tsd-parent-kind-interface"><a href="main.data.DataLayer.html#fetch" class="tsd-kind-icon">fetch</a></li><li class="tsd-kind-method tsd-parent-kind-interface"><a href="main.data.DataLayer.html#setAdapter" class="tsd-kind-icon">set<wbr/>Adapter</a></li></ul></section></div></section></section><section class="tsd-panel-group tsd-member-group "><h2>Methods</h2><section class="tsd-panel tsd-member tsd-kind-method tsd-parent-kind-interface"><a id="createRequest" class="tsd-anchor"></a><h3 class="tsd-anchor-link">create<wbr/>Request<a href="#createRequest" aria-label="Permalink" class="tsd-anchor-icon"><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M10 14a3.5 3.5 0 0 0 5 0l4 -4a3.5 3.5 0 0 0 -5 -5l-.5 .5"></path><path d="M14 10a3.5 3.5 0 0 0 -5 0l-4 4a3.5 3.5 0 0 0 5 5l.5 -.5"></path></svg></a></h3><ul class="tsd-signatures tsd-kind-method tsd-parent-kind-interface"><li class="tsd-signature tsd-kind-icon">create<wbr/>Request<span class="tsd-signature-symbol">(</span>definition<span class="tsd-signature-symbol">: </span><a href="main.data.DataDefinition.html" class="tsd-signature-type" data-tsd-kind="Interface">DataDefinition</a>, params<span class="tsd-signature-symbol">?: </span><span class="tsd-signature-type">Record</span><span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type">string</span><span class="tsd-signature-symbol">, </span><span class="tsd-signature-type">any</span><span class="tsd-signature-symbol">&gt;</span>, body<span class="tsd-signature-symbol">?: </span><span class="tsd-signature-type">any</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><a href="main.data.Request.html" class="tsd-signature-type" data-tsd-kind="Interface">Request</a></li></ul><ul class="tsd-descriptions"><li class="tsd-description"><aside class="tsd-sources"><ul><li>Defined in data/index.ts:503</li></ul></aside><div class="tsd-comment tsd-typography"><div class="lead">
<p>Converts a <a href="main.data.DataDefinition.html">DataDefinition</a> object into a <a href="main.data.Request.html">Request</a> object that can be
passed to <a href="main.data.DataLayer.html#fetch">fetch</a>. The {@link Proxy} passed to
{@link module:data.createDataLayer createDataLayer} will be used to fill out the
Request using any configured <a href="main.data.ProxyRule.html">ProxyRules</a>.</p>
</div><div><p>Keeping your data definition objects separate from request objects enables us to
construct dynamic requests based on ProxyRules set at runtime. This means we can change
the endpoints and protocols using configuration data rather than code.</p>
</div><dl class="tsd-comment-tags"><dt>throws</dt><dd><p>A valid DataDefinition object must be passed to createRequest.</p>
</dd><dt>example</dt><dd><pre><code class="language-js"><span class="hl-7">// save modified user data using a PATCH</span><br/><br/><span class="hl-1">import</span><span class="hl-0"> { </span><span class="hl-3">createPatch</span><span class="hl-0"> } </span><span class="hl-1">from</span><span class="hl-0"> </span><span class="hl-4">&#39;some/json-patch/library&#39;</span><span class="hl-0">;</span><br/><span class="hl-1">import</span><span class="hl-0"> { </span><span class="hl-3">createRequest</span><span class="hl-0">, </span><span class="hl-3">fetch</span><span class="hl-0"> } </span><span class="hl-1">from</span><span class="hl-0"> </span><span class="hl-4">&#39;~/path/to/datalayer&#39;</span><span class="hl-0">;</span><br/><br/><span class="hl-2">const</span><span class="hl-0"> </span><span class="hl-5">operation</span><span class="hl-0"> = {</span><br/><span class="hl-0">  </span><span class="hl-3">base:</span><span class="hl-0"> </span><span class="hl-4">&#39;my-app&#39;</span><span class="hl-0">,</span><br/><span class="hl-0">  </span><span class="hl-3">method:</span><span class="hl-0"> </span><span class="hl-4">&#39;PATCH&#39;</span><span class="hl-0">,</span><br/><span class="hl-0">  </span><span class="hl-3">path:</span><span class="hl-0"> </span><span class="hl-4">&#39;/users/:id&#39;</span><br/><span class="hl-0">};</span><br/><br/><span class="hl-1">export</span><span class="hl-0"> </span><span class="hl-2">async</span><span class="hl-0"> </span><span class="hl-2">function</span><span class="hl-0"> </span><span class="hl-6">saveUserData</span><span class="hl-0">(</span><span class="hl-3">id</span><span class="hl-0">, </span><span class="hl-3">modified</span><span class="hl-0">, </span><span class="hl-3">original</span><span class="hl-0">) {</span><br/><span class="hl-0">  </span><span class="hl-2">const</span><span class="hl-0"> </span><span class="hl-5">params</span><span class="hl-0"> = { </span><span class="hl-3">id</span><span class="hl-0"> };</span><br/><span class="hl-0">  </span><span class="hl-2">const</span><span class="hl-0"> </span><span class="hl-5">body</span><span class="hl-0"> = </span><span class="hl-6">createPatch</span><span class="hl-0">(</span><span class="hl-3">original</span><span class="hl-0">, </span><span class="hl-3">modified</span><span class="hl-0">);</span><br/><span class="hl-0">  </span><span class="hl-2">const</span><span class="hl-0"> </span><span class="hl-5">request</span><span class="hl-0"> = </span><span class="hl-6">createRequest</span><span class="hl-0">(</span><span class="hl-3">operation</span><span class="hl-0">, </span><span class="hl-3">params</span><span class="hl-0">, </span><span class="hl-3">body</span><span class="hl-0">);</span><br/><span class="hl-0">  </span><span class="hl-2">const</span><span class="hl-0"> </span><span class="hl-5">response</span><span class="hl-0"> = </span><span class="hl-1">await</span><span class="hl-0"> </span><span class="hl-6">fetch</span><span class="hl-0">(</span><span class="hl-3">request</span><span class="hl-0">).</span><span class="hl-6">catch</span><span class="hl-0">(</span><span class="hl-3">errors</span><span class="hl-0">.</span><span class="hl-6">rethrow</span><span class="hl-0">(</span><span class="hl-3">errors</span><span class="hl-0">.</span><span class="hl-6">fatal</span><span class="hl-0">(</span><span class="hl-3">params</span><span class="hl-0">)));</span><br/><span class="hl-0">  </span><span class="hl-1">return</span><span class="hl-0"> </span><span class="hl-3">response</span><span class="hl-0">.</span><span class="hl-3">data</span><span class="hl-0">;</span><br/><span class="hl-0">}</span>
</code></pre>
</dd><dt>example</dt><dd><pre><code class="language-js"><span class="hl-7">// load data using the current domain and protocol</span><br/><br/><span class="hl-1">import</span><span class="hl-0"> { </span><span class="hl-3">createRequest</span><span class="hl-0">, </span><span class="hl-3">fetch</span><span class="hl-0"> } </span><span class="hl-1">from</span><span class="hl-0"> </span><span class="hl-4">&#39;~/path/to/datalayer&#39;</span><span class="hl-0">;</span><br/><br/><span class="hl-2">const</span><span class="hl-0"> </span><span class="hl-5">operation</span><span class="hl-0"> = {</span><br/><span class="hl-0">  </span><span class="hl-3">method:</span><span class="hl-0"> </span><span class="hl-4">&#39;GET&#39;</span><span class="hl-0">,</span><br/><span class="hl-0">  </span><span class="hl-7">// by not specifying a `base` value the resulting</span><br/><span class="hl-0">  </span><span class="hl-7">// URL will be relative to the current domain and</span><br/><span class="hl-0">  </span><span class="hl-7">// protocol</span><br/><span class="hl-0">  </span><span class="hl-3">path:</span><span class="hl-0"> </span><span class="hl-4">&#39;/users/:id&#39;</span><br/><span class="hl-0">};</span><br/><br/><span class="hl-1">export</span><span class="hl-0"> </span><span class="hl-2">async</span><span class="hl-0"> </span><span class="hl-2">function</span><span class="hl-0"> </span><span class="hl-6">loadUserData</span><span class="hl-0">(</span><span class="hl-3">id</span><span class="hl-0">) {</span><br/><span class="hl-0">  </span><span class="hl-2">const</span><span class="hl-0"> </span><span class="hl-5">params</span><span class="hl-0"> = { </span><span class="hl-3">id</span><span class="hl-0"> };</span><br/><span class="hl-0">  </span><span class="hl-2">const</span><span class="hl-0"> </span><span class="hl-5">request</span><span class="hl-0"> = </span><span class="hl-6">createRequest</span><span class="hl-0">(</span><span class="hl-3">operation</span><span class="hl-0">, </span><span class="hl-3">params</span><span class="hl-0">);</span><br/><span class="hl-0">  </span><span class="hl-2">const</span><span class="hl-0"> </span><span class="hl-5">response</span><span class="hl-0"> = </span><span class="hl-1">await</span><span class="hl-0"> </span><span class="hl-6">fetch</span><span class="hl-0">(</span><span class="hl-3">request</span><span class="hl-0">).</span><span class="hl-6">catch</span><span class="hl-0">(</span><span class="hl-3">errors</span><span class="hl-0">.</span><span class="hl-6">rethrow</span><span class="hl-0">(</span><span class="hl-3">params</span><span class="hl-0">));</span><br/><span class="hl-0">  </span><span class="hl-1">return</span><span class="hl-0"> </span><span class="hl-3">response</span><span class="hl-0">.</span><span class="hl-3">data</span><span class="hl-0">;</span><br/><span class="hl-0">}</span>
</code></pre>
</dd></dl></div><h4 class="tsd-parameters-title">Parameters</h4><ul class="tsd-parameters"><li><h5>definition: <a href="main.data.DataDefinition.html" class="tsd-signature-type" data-tsd-kind="Interface">DataDefinition</a></h5><div class="tsd-comment tsd-typography"><div class="lead">
<p>The DataDefinition to convert into a Request using ProxyRules.</p>
</div></div></li><li><h5><span class="tsd-flag ts-flagOptional">Optional</span> params: <span class="tsd-signature-type">Record</span><span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type">string</span><span class="tsd-signature-symbol">, </span><span class="tsd-signature-type">any</span><span class="tsd-signature-symbol">&gt;</span></h5><div class="tsd-comment tsd-typography"><div class="lead">
<p>Optional parameters used to tokenize the URL or to append to the QueryString.</p>
</div></div></li><li><h5><span class="tsd-flag ts-flagOptional">Optional</span> body: <span class="tsd-signature-type">any</span></h5><div class="tsd-comment tsd-typography"><div class="lead">
<p>Optional data to send with the request.</p>
</div></div></li></ul><h4 class="tsd-returns-title">Returns <a href="main.data.Request.html" class="tsd-signature-type" data-tsd-kind="Interface">Request</a></h4><div><p>A fully formed Request that can be passed to <a href="main.data.DataLayer.html#fetch">fetch</a>.</p>
</div></li></ul></section><section class="tsd-panel tsd-member tsd-kind-method tsd-parent-kind-interface"><a id="fetch" class="tsd-anchor"></a><h3 class="tsd-anchor-link">fetch<a href="#fetch" aria-label="Permalink" class="tsd-anchor-icon"><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M10 14a3.5 3.5 0 0 0 5 0l4 -4a3.5 3.5 0 0 0 -5 -5l-.5 .5"></path><path d="M14 10a3.5 3.5 0 0 0 -5 0l-4 4a3.5 3.5 0 0 0 5 5l.5 -.5"></path></svg></a></h3><ul class="tsd-signatures tsd-kind-method tsd-parent-kind-interface"><li class="tsd-signature tsd-kind-icon">fetch<span class="tsd-signature-symbol">(</span>request<span class="tsd-signature-symbol">: </span><a href="main.data.Request.html" class="tsd-signature-type" data-tsd-kind="Interface">Request</a><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">Promise</span><span class="tsd-signature-symbol">&lt;</span><a href="main.data.Response.html" class="tsd-signature-type" data-tsd-kind="Interface">Response</a><span class="tsd-signature-symbol">&gt;</span></li></ul><ul class="tsd-descriptions"><li class="tsd-description"><aside class="tsd-sources"><ul><li>Defined in data/index.ts:443</li></ul></aside><div class="tsd-comment tsd-typography"><div class="lead">
<p>Converts a <a href="main.data.Request.html">Request</a> into a <a href="main.data.Response.html">Response</a> by running the
request through an appropriate <a href="main.data.Adapter.html">Adapter</a>.</p>
</div><dl class="tsd-comment-tags"><dt>throws</dt><dd><p>Adapter not found.</p>
</dd><dt>throws</dt><dd><p>Invalid request passed to fetch.</p>
</dd><dt>throws</dt><dd><p>(if the Response.status is not 2xx)</p>
</dd><dt>example</dt><dd><pre><code class="language-js"><span class="hl-1">import</span><span class="hl-0"> </span><span class="hl-3">xhr</span><span class="hl-0"> </span><span class="hl-1">from</span><span class="hl-0"> </span><span class="hl-4">&#39;@paychex/adapter-xhr&#39;</span><span class="hl-0">;</span><br/><span class="hl-1">import</span><span class="hl-0"> </span><span class="hl-3">tracker</span><span class="hl-0"> </span><span class="hl-1">from</span><span class="hl-0"> </span><span class="hl-4">&#39;~/path/to/tracker&#39;</span><span class="hl-0">;</span><br/><span class="hl-1">import</span><span class="hl-0"> </span><span class="hl-3">proxy</span><span class="hl-0"> </span><span class="hl-1">from</span><span class="hl-0"> </span><span class="hl-4">&#39;~/path/to/proxy&#39;</span><span class="hl-0">;</span><br/><br/><span class="hl-7">// NOTE: you will probably already have access to</span><br/><span class="hl-7">// a datalayer and not need to create one yourself</span><br/><span class="hl-2">const</span><span class="hl-0"> { </span><span class="hl-5">fetch</span><span class="hl-0">, </span><span class="hl-5">createRequest</span><span class="hl-0"> } = </span><span class="hl-3">data</span><span class="hl-0">.</span><span class="hl-6">createDataLayer</span><span class="hl-0">(</span><span class="hl-3">proxy</span><span class="hl-0">, </span><span class="hl-3">xhr</span><span class="hl-0">);</span><br/><br/><span class="hl-2">const</span><span class="hl-0"> </span><span class="hl-5">request</span><span class="hl-0"> = </span><span class="hl-6">createRequest</span><span class="hl-0">({</span><br/><span class="hl-0">  </span><span class="hl-3">base:</span><span class="hl-0"> </span><span class="hl-4">&#39;my-app&#39;</span><span class="hl-0">,</span><br/><span class="hl-0">  </span><span class="hl-3">path:</span><span class="hl-0"> </span><span class="hl-4">&#39;/live&#39;</span><span class="hl-0">,</span><br/><span class="hl-0">});</span><br/><br/><span class="hl-6">fetch</span><span class="hl-0">(</span><span class="hl-3">request</span><span class="hl-0">)</span><br/><span class="hl-0">  .</span><span class="hl-6">then</span><span class="hl-0">(</span><span class="hl-3">response</span><span class="hl-0"> </span><span class="hl-2">=&gt;</span><span class="hl-0"> {</span><br/><span class="hl-0">    </span><span class="hl-3">tracker</span><span class="hl-0">.</span><span class="hl-6">event</span><span class="hl-0">(</span><span class="hl-4">&#39;app is live&#39;</span><span class="hl-0">, {</span><br/><span class="hl-0">      </span><span class="hl-3">status:</span><span class="hl-0"> </span><span class="hl-3">response</span><span class="hl-0">.</span><span class="hl-3">status</span><span class="hl-0">,</span><br/><span class="hl-0">      </span><span class="hl-3">message:</span><span class="hl-0"> </span><span class="hl-3">response</span><span class="hl-0">.</span><span class="hl-3">statusText</span><span class="hl-0">,</span><br/><span class="hl-0">      </span><span class="hl-3">moreInfo:</span><span class="hl-0"> </span><span class="hl-3">response</span><span class="hl-0">.</span><span class="hl-3">data</span><span class="hl-0">,</span><br/><span class="hl-0">    });</span><br/><span class="hl-0">  })</span><br/><span class="hl-0">  .</span><span class="hl-6">catch</span><span class="hl-0">(</span><span class="hl-3">tracker</span><span class="hl-0">.</span><span class="hl-3">error</span><span class="hl-0">);</span>
</code></pre>
</dd></dl></div><h4 class="tsd-parameters-title">Parameters</h4><ul class="tsd-parameters"><li><h5>request: <a href="main.data.Request.html" class="tsd-signature-type" data-tsd-kind="Interface">Request</a></h5><div class="tsd-comment tsd-typography"><div class="lead">
<p>The Request to pass to an <a href="main.data.Adapter.html">Adapter</a>
and convert into a <a href="main.data.Response.html">Response</a>.</p>
</div></div></li></ul><h4 class="tsd-returns-title">Returns <span class="tsd-signature-type">Promise</span><span class="tsd-signature-symbol">&lt;</span><a href="main.data.Response.html" class="tsd-signature-type" data-tsd-kind="Interface">Response</a><span class="tsd-signature-symbol">&gt;</span></h4><div><p>Information about the data operation.</p>
</div></li></ul></section><section class="tsd-panel tsd-member tsd-kind-method tsd-parent-kind-interface"><a id="setAdapter" class="tsd-anchor"></a><h3 class="tsd-anchor-link">set<wbr/>Adapter<a href="#setAdapter" aria-label="Permalink" class="tsd-anchor-icon"><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M10 14a3.5 3.5 0 0 0 5 0l4 -4a3.5 3.5 0 0 0 -5 -5l-.5 .5"></path><path d="M14 10a3.5 3.5 0 0 0 -5 0l-4 4a3.5 3.5 0 0 0 5 5l.5 -.5"></path></svg></a></h3><ul class="tsd-signatures tsd-kind-method tsd-parent-kind-interface"><li class="tsd-signature tsd-kind-icon">set<wbr/>Adapter<span class="tsd-signature-symbol">(</span>name<span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">string</span>, adapter<span class="tsd-signature-symbol">: </span><a href="main.data.Adapter.html" class="tsd-signature-type" data-tsd-kind="Interface">Adapter</a><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">void</span></li></ul><ul class="tsd-descriptions"><li class="tsd-description"><aside class="tsd-sources"><ul><li>Defined in data/index.ts:566</li></ul></aside><div class="tsd-comment tsd-typography"><div class="lead">
<p>Registers an <a href="main.data.Adapter.html">Adapter</a> with the given name. The <a href="main.data.DataLayer.html#fetch">fetch</a>
method will match the <code>&#39;adapter&#39;</code> value on the <a href="main.data.Request.html">Request</a> it is given with
any Adapters registered here.</p>
</div><div><p><strong>NOTE:</strong> The default adapter for a Request is the adapter used to construct the
data layer, which is always registered as <code>&#39;default&#39;</code>.</p>
</div><dl class="tsd-comment-tags"><dt>example</dt><dd><pre><code class="language-js"><span class="hl-7">// create a custom Adapter that uses the</span><br/><span class="hl-7">// popular Axios library to make data calls</span><br/><span class="hl-7">// https://github.com/axios/axios</span><br/><br/><span class="hl-1">import</span><span class="hl-0"> </span><span class="hl-3">axios</span><span class="hl-0"> </span><span class="hl-1">from</span><span class="hl-0"> </span><span class="hl-4">&#39;axios&#39;</span><span class="hl-0">;</span><br/><span class="hl-1">import</span><span class="hl-0"> { </span><span class="hl-3">cloneDeep</span><span class="hl-0"> } </span><span class="hl-1">from</span><span class="hl-0"> </span><span class="hl-4">&#39;lodash&#39;</span><span class="hl-0">;</span><br/><span class="hl-1">import</span><span class="hl-0"> { </span><span class="hl-3">setAdapter</span><span class="hl-0">, </span><span class="hl-3">createRequest</span><span class="hl-0">, </span><span class="hl-3">fetch</span><span class="hl-0"> } </span><span class="hl-1">from</span><span class="hl-0"> </span><span class="hl-4">&#39;~/path/to/datalayer&#39;</span><span class="hl-0">;</span><br/><br/><span class="hl-2">const</span><span class="hl-0"> </span><span class="hl-5">http</span><span class="hl-0"> = </span><span class="hl-3">axios</span><span class="hl-0">.</span><span class="hl-6">create</span><span class="hl-0">({</span><br/><span class="hl-0">  </span><span class="hl-3">withCredentials:</span><span class="hl-0"> </span><span class="hl-2">true</span><span class="hl-0">,</span><br/><span class="hl-0">  </span><span class="hl-3">headers:</span><span class="hl-0"> { </span><span class="hl-3">accept:</span><span class="hl-0"> </span><span class="hl-4">&#39;application/json&#39;</span><span class="hl-0"> }</span><br/><span class="hl-0">});</span><br/><br/><span class="hl-7">// construct and return a Response object</span><br/><span class="hl-7">// using the values provided by Axios</span><br/><span class="hl-2">function</span><span class="hl-0"> </span><span class="hl-6">createResponseFromSuccess</span><span class="hl-0">(</span><span class="hl-3">axiosResponse</span><span class="hl-0">) { ... }</span><br/><span class="hl-2">function</span><span class="hl-0"> </span><span class="hl-6">createResponseFromFailure</span><span class="hl-0">(</span><span class="hl-3">axiosError</span><span class="hl-0">) { ... }</span><br/><br/><span class="hl-6">setAdapter</span><span class="hl-0">(</span><span class="hl-4">&#39;axios&#39;</span><span class="hl-0">, </span><span class="hl-2">function</span><span class="hl-0"> </span><span class="hl-6">useAxios</span><span class="hl-0">(</span><span class="hl-3">request</span><span class="hl-0">) {</span><br/><span class="hl-0">  </span><span class="hl-7">// convert the Request into a config</span><br/><span class="hl-0">  </span><span class="hl-7">// that Axios understands -- e.g. axios</span><br/><span class="hl-0">  </span><span class="hl-7">// uses request.data instead of request.body</span><br/><span class="hl-0">  </span><span class="hl-2">const</span><span class="hl-0"> </span><span class="hl-5">config</span><span class="hl-0"> = </span><span class="hl-6">cloneDeep</span><span class="hl-0">(</span><span class="hl-3">request</span><span class="hl-0">);</span><br/><span class="hl-0">  </span><span class="hl-3">config</span><span class="hl-0">.</span><span class="hl-3">data</span><span class="hl-0"> = </span><span class="hl-3">request</span><span class="hl-0">.</span><span class="hl-3">body</span><span class="hl-0">;</span><br/><span class="hl-0">  </span><span class="hl-1">return</span><span class="hl-0"> </span><span class="hl-6">axios</span><span class="hl-0">(</span><span class="hl-3">config</span><span class="hl-0">)</span><br/><span class="hl-0">    </span><span class="hl-7">// always resolve with a Response,</span><br/><span class="hl-0">    </span><span class="hl-7">// regardless of any errors:</span><br/><span class="hl-0">    .</span><span class="hl-6">then</span><span class="hl-0">(</span><span class="hl-3">createResponseFromSuccess</span><span class="hl-0">)</span><br/><span class="hl-0">    .</span><span class="hl-6">catch</span><span class="hl-0">(</span><span class="hl-3">createResponseFromFailure</span><span class="hl-0">);</span><br/><span class="hl-0">});</span><br/><br/><span class="hl-7">// usage:</span><br/><span class="hl-2">const</span><span class="hl-0"> </span><span class="hl-5">definition</span><span class="hl-0"> = {</span><br/><span class="hl-0">  </span><span class="hl-3">base:</span><span class="hl-0"> </span><span class="hl-4">&#39;my-app&#39;</span><span class="hl-0">,</span><br/><span class="hl-0">  </span><span class="hl-3">path:</span><span class="hl-0"> </span><span class="hl-4">&#39;/path/to/data&#39;</span><span class="hl-0">,</span><br/><span class="hl-0">  </span><span class="hl-3">adapter:</span><span class="hl-0"> </span><span class="hl-4">&#39;axios&#39;</span><span class="hl-0">, </span><span class="hl-7">// &lt;-- use our custom adapter</span><br/><span class="hl-0">  </span><span class="hl-3">method:</span><span class="hl-0"> </span><span class="hl-4">&#39;POST&#39;</span><span class="hl-0">,</span><br/><span class="hl-0">};</span><br/><br/><span class="hl-1">export</span><span class="hl-0"> </span><span class="hl-2">async</span><span class="hl-0"> </span><span class="hl-2">function</span><span class="hl-0"> </span><span class="hl-6">saveData</span><span class="hl-0">(</span><span class="hl-3">data</span><span class="hl-0">) {</span><br/><span class="hl-0">  </span><span class="hl-7">// our code looks the same regardless of which adapter</span><br/><span class="hl-0">  </span><span class="hl-7">// is used to make the data call; the adapter could even</span><br/><span class="hl-0">  </span><span class="hl-7">// be changed dynamically by the rules in our Proxy</span><br/><span class="hl-0">  </span><span class="hl-2">const</span><span class="hl-0"> </span><span class="hl-5">request</span><span class="hl-0"> = </span><span class="hl-6">createRequest</span><span class="hl-0">(</span><span class="hl-3">definition</span><span class="hl-0">, </span><span class="hl-2">null</span><span class="hl-0">, </span><span class="hl-3">data</span><span class="hl-0">);</span><br/><span class="hl-0">  </span><span class="hl-2">const</span><span class="hl-0"> </span><span class="hl-5">response</span><span class="hl-0"> = </span><span class="hl-1">await</span><span class="hl-0"> </span><span class="hl-6">fetch</span><span class="hl-0">(</span><span class="hl-3">request</span><span class="hl-0">);</span><br/><span class="hl-0">  </span><span class="hl-1">return</span><span class="hl-0"> </span><span class="hl-3">response</span><span class="hl-0">.</span><span class="hl-3">meta</span><span class="hl-0">.</span><span class="hl-3">headers</span><span class="hl-0">[</span><span class="hl-4">&#39;e-tag&#39;</span><span class="hl-0">];</span><br/><span class="hl-0">}</span>
</code></pre>
</dd></dl></div><h4 class="tsd-parameters-title">Parameters</h4><ul class="tsd-parameters"><li><h5>name: <span class="tsd-signature-type">string</span></h5><div class="tsd-comment tsd-typography"><div class="lead">
<p>The name of the Adapter to register.</p>
</div></div></li><li><h5>adapter: <a href="main.data.Adapter.html" class="tsd-signature-type" data-tsd-kind="Interface">Adapter</a></h5><div class="tsd-comment tsd-typography"><div class="lead">
<p>The Adapter to register.</p>
</div></div></li></ul><h4 class="tsd-returns-title">Returns <span class="tsd-signature-type">void</span></h4></li></ul></section></section></div><div class="col-4 col-menu menu-sticky-wrap menu-highlight"><nav class="tsd-navigation primary"><ul><li class=""><a href="../modules.html">Modules</a></li><li class="current tsd-kind-module"><a href="../modules/main.html">main</a><ul><li class="current tsd-kind-namespace tsd-parent-kind-module"><a href="../modules/main.data.html">data</a><ul><li class=" tsd-kind-namespace tsd-parent-kind-namespace"><a href="../modules/main.data.utils.html">utils</a></li></ul></li><li class=" tsd-kind-namespace tsd-parent-kind-module"><a href="../modules/main.errors.html">errors</a></li><li class=" tsd-kind-namespace tsd-parent-kind-module"><a href="../modules/main.events.html">events</a></li><li class=" tsd-kind-namespace tsd-parent-kind-module"><a href="../modules/main.formatters.html">formatters</a></li><li class=" tsd-kind-namespace tsd-parent-kind-module"><a href="../modules/main.functions.html">functions</a></li><li class=" tsd-kind-namespace tsd-parent-kind-module"><a href="../modules/main.models.html">models</a></li><li class=" tsd-kind-namespace tsd-parent-kind-module"><a href="../modules/main.process.html">process</a></li><li class=" tsd-kind-namespace tsd-parent-kind-module"><a href="../modules/main.signals.html">signals</a></li><li class=" tsd-kind-namespace tsd-parent-kind-module"><a href="../modules/main.stores.html">stores</a></li><li class=" tsd-kind-namespace tsd-parent-kind-module"><a href="../modules/main.trackers.html">trackers</a></li><li class=" tsd-kind-namespace tsd-parent-kind-module"><a href="../modules/main.validators.html">validators</a></li></ul></li><li class=" tsd-kind-module"><a href="../modules/test.html">test</a></li></ul></nav><nav class="tsd-navigation secondary menu-sticky"><ul><li class="current tsd-kind-interface tsd-parent-kind-namespace"><a href="main.data.DataLayer.html" class="tsd-kind-icon">Data<wbr/>Layer</a><ul><li class="tsd-kind-method tsd-parent-kind-interface"><a href="main.data.DataLayer.html#createRequest" class="tsd-kind-icon">create<wbr/>Request</a></li><li class="tsd-kind-method tsd-parent-kind-interface"><a href="main.data.DataLayer.html#fetch" class="tsd-kind-icon">fetch</a></li><li class="tsd-kind-method tsd-parent-kind-interface"><a href="main.data.DataLayer.html#setAdapter" class="tsd-kind-icon">set<wbr/>Adapter</a></li></ul></li></ul></nav></div></div></div><footer class=""><div class="container"><h2>Legend</h2><div class="tsd-legend-group"><ul class="tsd-legend"><li class="tsd-kind-namespace"><span class="tsd-kind-icon">Namespace</span></li><li class="tsd-kind-function"><span class="tsd-kind-icon">Function</span></li></ul><ul class="tsd-legend"><li class="tsd-kind-interface"><span class="tsd-kind-icon">Interface</span></li><li class="tsd-kind-method tsd-parent-kind-interface"><span class="tsd-kind-icon">Method</span></li></ul></div><h2>Settings</h2><p>Theme <select id="theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></p></div></footer><div class="overlay"></div><script src="../assets/main.js"></script></body></html>